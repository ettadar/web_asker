<grammar version="1.0" xml:lang="en-US" mode="voice" root="toplevel" xmlns="http://www.w3.org/2001/06/grammar" tag-format="semantics/1.0">
  <rule id="toplevel" scope="public">
    <one-of>
      <item>
        <ruleref uri="#Pick"/>
        <tag> out = rules.latest(); </tag>
      </item>
      <item>
        <ruleref uri="#Give"/>
        <tag> out = rules.latest(); </tag>
      </item>
      <item>
        <ruleref uri="#Hold"/>
        <tag>  out = rules.latest(); </tag>
      </item>
      <item>
        <ruleref uri="#GoHomeRight"/>
        <tag>  out.action = "go_home_right"; </tag>
      </item>
      <item>
        <ruleref uri="#GoHomeLeft"/>
        <tag>  out.action = "go_home_left"; </tag>
      </item>
      <item>
        <ruleref uri="#Stop"/>
        <tag>  out.action = "stop"; </tag>
      </item>
      <item>
        <ruleref uri="#Pause"/>
        <tag>  out.action = "pause"; </tag>
      </item>
      <item>
        <ruleref uri="#Unpause"/>
        <tag>  out.action = "unpause"; </tag>
      </item>
      <item>
        <ruleref uri="#Start"/>
        <tag>  out.action = "start"; </tag>
      </item>
      <item>
        <ruleref uri="#Restart"/>
        <tag>  out.action = "restart"; </tag>
      </item>
      <item>
        <ruleref uri="#DoIt"/>
        <tag>  out.action = "do_it"; </tag>
      </item>
      <item>
        <ruleref uri="#DontDoThat"/>
        <tag>  out.action = "dont_do_that"; </tag>
      </item>
      <item>
        <ruleref uri="#DoSomething"/>
        <tag>  out.action = "do_something"; </tag>
      </item>
      <item>
        <ruleref uri="#SomethingElse"/>
        <tag>  out.action = "something_else"; </tag>
      </item>
    </one-of>
  </rule>


  <rule id="Give">
    <item> 
      give <tag> out.action = "give"; </tag>
    </item>
    <item repeat="0-1"> me </item>
    <ruleref uri="#Object"/>
    <tag> out.object = rules.latest(); </tag>
  </rule>

  <rule id="Pick">
    <item> 
      pick <tag> out.action = "pick"; </tag>
    </item>
    <ruleref uri="#Object"/>
    <tag> out.object = rules.latest(); </tag>
  </rule>

  <rule id="Hold">
    <item>
      hold <tag> out.action = "hold"; </tag>
    </item>
    <ruleref uri="#Object"/>
    <tag> out.object = rules.latest(); </tag>
    <item repeat="0-1"> on its </item>
    <ruleref uri="#Pose"/>
    <tag> out.pose = rules.latest(); </tag>
  </rule>

  <rule id="Object">
    <item repeat="0-1"> the </item>
    <item repeat="0-1"> side </item>
    <one-of>
      <item>
        front <tag> out = "side_front"; </tag>
      </item>
      <item>
        back <tag> out = "side_back"; </tag>
      </item>
      <item>
        left <tag> out = "side_left"; </tag>
      </item>
      <item>
        right <tag> out = "side_right"; </tag>
      </item>
      <item>
        handle <tag> out = "handle"; </tag>
      </item>
    </one-of>
  </rule>

  <rule id="GoHomeRight">
    <item>
      go home right
    </item>
  </rule>

  <rule id="GoHomeLeft">
    <item>
      go home left
    </item>
  </rule>

  <rule id="Pose">
    <one-of>
      <item>
        left <tag> out = "left"; </tag>
      </item>
      <item>
        right <tag> out = "right"; </tag>
      </item>
    </one-of>
  </rule>

  <rule id="DoIt">
    <item repeat="0-1"> yes </item>
    <item>
      do it
    </item>
  </rule>

  <rule id="DoSomething">
    <item repeat="0-1"> yes </item>
    <item>
      do something
    </item>
  </rule>

  <rule id="SomethingElse">
    <item repeat="0-1"> do </item>
    <one-of>
      <item>
        something else
      </item>
      <item>
        nothing
      </item>
    </one-of>
  </rule>

  <rule id="DontDoThat">
    <item repeat="0-1"> no </item>
    <item>
      don't do that
    </item>
  </rule>

  <rule id="Start">
    <item>
      let's go
    </item>
  </rule>

  <rule id="Restart">
    <item>
      restart
    </item>
  </rule>

  <rule id="Stop">
    <item>
      it's finished
    </item>
  </rule>

  <rule id="Pause">
    <item>
      pause
    </item>
  </rule>

  <rule id="Unpause">
    <item>
      unpause
    </item>
  </rule>

</grammar>
